<html>

<head>
    <title>graph</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <style >
        div{
            display: inline-block;
        }
    </style>
</head> 
<body>
    <div id="circle"></div>
    <div id="histogram"></div>
<script>
    var data = [{
                "x": 448129.7516292425,
                "y": 4929884.0
            }, {
                "x": 1189256.2481667276,
                "y": 3221713.0
            }, {
                "x": 1920073.6527260146,
                "y": 4814873.0
            }, {
                "x": 2795981.133107897,
                "y": 4814965.0
            }, {
                "x": 3816654.8643359104,
                "y": 6419947.0
            }]

        var height = 400;
        var width = 600;
        var padding = 50;


        function modifyDataForCircle(arrayData, factor) {
            return arrayData.map(function(row) {
                return {
                    x: row.x / factor,
                    y: row.y / factor
               }
            })
        }
        
        var dataForCircles = modifyDataForCircle(data, 100000);
        
        var scale = d3.scale.linear()
            .domain([0, d3.max(dataForCircles.map(function(r){ return (r.x + r.y)/2; }))])
            .range([0, width])
        
        var scaleY = d3.scale.linear()
            .domain([0, d3.max(dataForCircles.map(function(r){ return (2 * r.y); }))])
            .range([height , 0])
        

        var axis = d3.svg.axis()
                    .scale(scale).orient("bottom");
        
        var axisY = d3.svg.axis()
                    .scale(scaleY).orient("left")

        var canvas = d3.select("#circle")
            .append("svg")
            .attr("height", height + padding)
            .attr("width", width)
            .append("g")
            .attr("transform", "translate(30,10)")
            

        var graph = canvas.selectAll("circle")
            .data(dataForCircles)
            .enter()
                .append("circle")
                .attr("cx", function(d) {
                    return scale(d.x);
                })
                .attr("cy", function(d) {
                    return scaleY(d.y);
                })
                .attr("r", function(d) { return (d.x + d.y)/2 } )
                .attr("fill", "blue");
    
        canvas.append("g")
            .call(axisY)    
    
        canvas.append("g")
            .attr("transform", "translate(0,"+ height + ")")
            .call(axis)
        
            
        // histogram code..
        
        
        var dataForRect = modifyDataForCircle(data, 10000);
        console.log("data>>>>>>.",data)
    
        var histogram = d3.layout.histogram().bins(5)(dataForRect)
        
        console.log("histogram>>>>>>>",histogram)
        
        var scaleXRect = d3.scale.linear()
            .domain([0, d3.max(dataForRect.map(function(r){ return r.x; }))])
            .range([0, width])
        
        var scaleYRect = d3.scale.linear()
            .domain([0, d3.max(dataForRect.map(function(r){ return r.y; }))])
            .range([height , 0])
        
        var axisXRect = d3.svg.axis()
                    .scale(scaleXRect).orient("bottom");
        
        var axisYRect = d3.svg.axis()
                    .scale(scaleYRect).orient("left")

        
        var canvasRect = d3.select("#histogram")
            .append("svg")
            .attr("height", height + padding)
            .attr("width", width)
            .append("g")
            .attr("transform", "translate(40,10)")
            

        var graphRect = canvasRect.selectAll("rect")
            .data(dataForRect)
            .enter()
                .append("rect")
                .attr("x", function(d) {
                    return scaleXRect(d.x);
                })
                .attr("y", function(d) {
                    return height - scaleYRect(d.y);
                })
                .attr("width", function(d) { return scaleXRect(d.x)  } )
                .attr("height", function(d) { return scaleXRect(d.y) } )
                .attr("fill", "blue");
    
        canvasRect.append("g")
            .call(axisYRect)    
    
        canvasRect.append("g")
            .attr("transform", "translate(10,"+ height + ")")
            .call(axisXRect)
        

    </script>
    
        </body> </html>
